/**
 * Kerangka pembuat soal dan pemeriksa jawaban
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 *
 * @author Muhammad Rifqi Priyo Susanto
 * @publisher Team Tanpa Les Indonesia
 */
var intervalStopwatch,kunciJawaban=[],waktuMulai=0;window.addEventListener("load",(function(){tombolBuat.removeAttribute("disabled"),tombolPeriksa.setAttribute("disabled","disabled")})),tombolBuat.addEventListener("click",(function(){var a=isianJumlah.value;if(isNaN(a)||a<1)alert("Jumlah soal setidaknya satu!");else{"function"==typeof sebelumBuat&&sebelumBuat(),kunciJawaban=[];for(var e="",t=0;t<a;t++){var n=buatSoal();kunciJawaban.push(n.slice(1)),e+='<div class="naskahSoal">',e+="<div>"+n[0]+"</div>",e+='<input type="text" class="isianJawaban" data-nomor="'+t+'">',e+="</div>"}hasilSoal.innerHTML=e,hasilPeriksa.innerHTML="",tombolPeriksa.removeAttribute("disabled"),menuParameter.style.display="none",menuSoal.style.display="",document.getElementsByClassName("isianJawaban")[0].focus(),waktuMulai=Date.now(),panelStopwatch.innerHTML="",intervalStopwatch=setInterval((function(){var a=Date.now()-waktuMulai,e=(a%6e4/1e3).toFixed(1),t=Math.floor(a/6e4),n=(e<10?"0":"")+e.replaceAll(".",","),i=(t<10?"0":"")+t;panelStopwatch.innerText=i+":"+n}),16)}})),tombolPeriksa.addEventListener("click",(function(){clearInterval(intervalStopwatch);for(var a=document.getElementsByClassName("isianJawaban"),e=0,t=0;t<a.length;t++){var n=a[t];n.setAttribute("disabled","disabled");var i=kunciJawaban[Number(n.dataset.nomor)],l=n.value.trim(),s=periksaJawaban(i[1],l);l.length>0&&s?(n.classList.add("benar"),n.insertAdjacentHTML("afterend",'<div><span class="ikonJawaban">✅</span></div>'),e++):(n.classList.add("salah"),n.insertAdjacentHTML("afterend",'<div><span class="ikonJawaban">❌</span><span class="kunciJawaban">'+i[0]+"</span></div>"))}var r=(e/kunciJawaban.length*100).toFixed(2).toString().replaceAll(".",",");hasilPeriksa.innerHTML="Skor: "+e+"/"+kunciJawaban.length+" ("+r+"%)",tombolPeriksa.setAttribute("disabled","disabled"),"function"==typeof setelahPeriksa&&setelahPeriksa(),window.scrollTo(0,hasilPeriksa.offsetTop)})),tombolUlang.addEventListener("click",(function(){clearInterval(intervalStopwatch),menuParameter.style.display="",menuSoal.style.display="none"}));var bilanganBulatAcak=function(a,e){return a-=.49,e+=.49,Math.round(Math.random()*(e-a)+a)};